<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koolo Store</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="header">
  <div class="logo">
    <img src="img/koolo_logo.png" alt="Koolo Logo">
  </div>

  <nav class="menu">
    <a href="#" onclick="mostrarTodos()">Inicio</a>

    <div class="dropdown">
      <span>CategorÃ­as â–¾</span>
      <div class="dropdown-content">
        <a href="#" onclick="filtrarCategoria('ropa')">Ropa</a>
        <a href="#" onclick="filtrarCategoria('accesorios')">Accesorios</a>
      </div>
    </div>

    <a href="#" onclick="abrirLogin()">Login</a>
  </nav>

  <div class="cart-icon" onclick="toggleCarrito()">
    ðŸ›’ <span id="cart-count">0</span>
  </div>
</header>

<section class="hero">
  <div class="hero-content">
    <h1>NUEVA COLECCIÃ“N 2026</h1>
    <p>Estilo urbano. Actitud propia.</p>
    <button onclick="scrollProductos()">Ver colecciÃ³n</button>
  </div>
</section>

<main class="productos" id="productos">

  <div class="producto" data-categoria="ropa">
    <img src="img/camiseta.png" alt="Camiseta">
    <h2>Camiseta</h2>
    <p>25 â‚¬</p>
    <button onclick="agregarAlCarrito('Camiseta',25)">AÃ±adir</button>
  </div>

  <div class="producto" data-categoria="accesorios">
    <img src="img/gorra.png" alt="Gorra">
    <h2>Gorra</h2>
    <p>20 â‚¬</p>
    <button onclick="agregarAlCarrito('Gorra',20)">AÃ±adir</button>
  </div>

  <div class="producto" data-categoria="ropa">
    <img src="img/sudadera.png" alt="Sudadera">
    <h2>Sudadera</h2>
    <p>40 â‚¬</p>
    <button onclick="agregarAlCarrito('Sudadera',40)">AÃ±adir</button>
  </div>

</main>

<!-- PANEL ADMIN -->
<section id="adminPanel" class="admin-panel">
  <h3>Panel Admin (Solo visible para ti)</h3>
  <input type="text" id="nuevoNombre" placeholder="Nombre del producto">
  <input type="number" id="nuevoPrecio" placeholder="Precio â‚¬">
  <select id="nuevaCategoria">
    <option value="ropa">Ropa</option>
    <option value="accesorios">Accesorios</option>
  </select>
  <input type="text" id="nuevaImagen" placeholder="Nombre archivo img.png">
  <button onclick="agregarProductoAdmin()">Agregar producto</button>
</section>

<!-- CARRITO -->
<div id="carrito" class="carrito">
  <h3>Carrito</h3>
  <ul id="lista-carrito"></ul>
  <p>Total: <span id="total">0</span> â‚¬</p>
  <button onclick="vaciarCarrito()">Vaciar</button>
  <div class="paypal-disabled">
    Pago con PayPal prÃ³ximamente
  </div>
</div>

<!-- MODAL LOGIN -->
<div id="loginModal" class="modal">
  <div class="modal-content">
    <span class="cerrar" onclick="cerrarLogin()">Ã—</span>
    <h2>Login</h2>
    <input type="text" placeholder="Usuario">
    <input type="password" placeholder="ContraseÃ±a">
    <button>Entrar</button>
  </div>
</div>

<script>
let carrito = [];
let total = 0;
let contadorProductos = {};

function agregarAlCarrito(nombre, precio){
  // Contador individual
  contadorProductos[nombre] = (contadorProductos[nombre] || 0) + 1;

  carrito.push({nombre, precio});
  total += precio;
  actualizarCarrito();
  animarCarrito();
  actualizarBadge(nombre);
}

function actualizarCarrito(){
  let lista = document.getElementById("lista-carrito");
  lista.innerHTML = "";
  carrito.forEach(item=>{
    let li = document.createElement("li");
    li.textContent = item.nombre + " - " + item.precio + " â‚¬";
    lista.appendChild(li);
  });
  document.getElementById("total").textContent = total;
  document.getElementById("cart-count").textContent = carrito.length;
}

function vaciarCarrito(){
  carrito = [];
  total = 0;
  contadorProductos = {};
  actualizarCarrito();
  document.querySelectorAll(".producto .badge").forEach(b=>b.remove());
}

function toggleCarrito(){
  let c = document.getElementById("carrito");
  c.style.display = c.style.display === "block" ? "none" : "block";
}

function filtrarCategoria(cat){
  document.querySelectorAll(".producto").forEach(p=>{
    p.style.display = p.dataset.categoria === cat ? "block" : "none";
  });
}

function mostrarTodos(){
  document.querySelectorAll(".producto").forEach(p=>{
    p.style.display = "block";
  });
}

function abrirLogin(){
  document.getElementById("loginModal").style.display = "flex";
}

function cerrarLogin(){
  document.getElementById("loginModal").style.display = "none";
}

function scrollProductos(){
  document.getElementById("productos").scrollIntoView({behavior:"smooth"});
}

function animarCarrito(){
  let icon = document.querySelector(".cart-icon");
  icon.classList.add("shake");
  setTimeout(()=> icon.classList.remove("shake"), 400);
}

function actualizarBadge(nombre){
  document.querySelectorAll(".producto").forEach(p=>{
    let h2 = p.querySelector("h2").textContent;
    let badge = p.querySelector(".badge");
    if(h2===nombre){
      if(!badge){
        badge = document.createElement("span");
        badge.classList.add("badge");
        p.appendChild(badge);
      }
      badge.textContent = contadorProductos[nombre];
    }
  });
}

// PANEL ADMIN: agregar producto dinÃ¡micamente
function agregarProductoAdmin(){
  const nombre = document.getElementById("nuevoNombre").value;
  const precio = parseFloat(document.getElementById("nuevoPrecio").value);
  const categoria = document.getElementById("nuevaCategoria").value;
  const imagen = document.getElementById("nuevaImagen").value;

  if(!nombre || !precio || !imagen) return alert("Rellena todos los campos");

  const main = document.getElementById("productos");
  const div = document.createElement("div");
  div.classList.add("producto");
  div.dataset.categoria = categoria;
  div.innerHTML = `
    <img src="img/${imagen}" alt="${nombre}">
    <h2>${nombre}</h2>
    <p>${precio} â‚¬</p>
    <button onclick="agregarAlCarrito('${nombre}',${precio})">AÃ±adir</button>
  `;
  main.appendChild(div);

  document.getElementById("nuevoNombre").value="";
  document.getElementById("nuevoPrecio").value="";
  document.getElementById("nuevaImagen").value="";
}
</script>

</body>
</html>
